<Window x:Class="The_Movies.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:The_Movies" xmlns:viewmodel="clr-namespace:The_Movies.ViewModel" d:DataContext="{d:DesignInstance Type=viewmodel:MovieViewModel}"
        mc:Ignorable="d"

        Title="MainWindow" Height="450" Width="800">
    <Window.Resources>
    </Window.Resources>
    <TabControl x:Name="RootTabs">
        <TabItem Header="Film Liste" x:Name="MoviesTab">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="14*"/>
                    <ColumnDefinition Width="17*"/>
                    <ColumnDefinition Width="64*"/>
                    <ColumnDefinition Width="4*"/>
                    <ColumnDefinition Width="21*"/>
                    <ColumnDefinition Width="674*"/>
                </Grid.ColumnDefinitions>

                <Button Content="Opret Film" HorizontalAlignment="Left" Margin="247,347,0,0" VerticalAlignment="Top" 
                        Command="{Binding CreateMovieCommand}"
                        ToolTip="Fill in all fields to create a movie" Grid.Column="5">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Style.Triggers>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Background" Value="LightGray"/>
                                    <Setter Property="Foreground" Value="Gray"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                <!-- Logo -->
                <Image HorizontalAlignment="Left" Height="100" Margin="227,10,0,0" VerticalAlignment="Top" Width="100" Source="Skærmbillede 2025-08-14 135002.png" Grid.Column="5"/>
                <!-- Titel -->
                <TextBlock HorizontalAlignment="Left" Margin="131,125,0,0" TextWrapping="Wrap" Text="Titel" VerticalAlignment="Top" Grid.Column="5"/>
                <TextBox HorizontalAlignment="Left" Margin="131,141,0,0" TextWrapping="Wrap" Text="{Binding Title, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120" Grid.Column="5"/>
                <!-- Varighed -->
                <TextBlock HorizontalAlignment="Left" Margin="131,160,0,0" TextWrapping="Wrap" Text="Varighed (i minutter)" VerticalAlignment="Top" Grid.Column="5"/>
                <TextBox HorizontalAlignment="Left" Margin="131,181,0,0" TextWrapping="Wrap" Text="{Binding Duration, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120" Grid.Column="5"/>
                <!-- Filmgenre -->
                <TextBlock HorizontalAlignment="Left" Margin="131,204,0,0" TextWrapping="Wrap" Text="Filmgenre" VerticalAlignment="Top" Grid.Column="5"/>
                <TextBox HorizontalAlignment="Left" Margin="131,220,0,0" TextWrapping="Wrap" Text="{Binding Genre, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120" Grid.Column="5"/>
                <!-- Instruktør -->
                <TextBlock HorizontalAlignment="Left" Margin="131,246,0,0" TextWrapping="Wrap" Text="Instruktør" VerticalAlignment="Top" Grid.Column="5"/>
                <TextBox HorizontalAlignment="Left" Margin="131,262,0,0" TextWrapping="Wrap" Text="{Binding Director, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120" Grid.Column="5"/>
                <ListBox ItemsSource="{Binding MovieList}" SelectedItem="{Binding SelectedMovie,Mode=TwoWay}"
                         Margin="310,125,40,125" Grid.Column="5">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Title}" FontWeight="Bold" Margin="0,0,10,0" />
                                <TextBlock Text="{Binding Duration}" Margin="0,0,10,0" />
                                <TextBlock Text="{Binding Genre}" Margin="0,0,10,0" />
                                <TextBlock Text="{Binding Director}" Margin="0,0,10,0" />
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                <Button Content="Opret Film" HorizontalAlignment="Left" Margin="247,347,0,0" VerticalAlignment="Top" 
                    Command="{Binding CreateMovieCommand}"
                    ToolTip="Fill in all fields to create a movie" Grid.Column="5">
                    <Button.Style>
                        <Style TargetType="{x:Type Button}">
                            <Style.Triggers>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Background" Value="LightGray"/>
                                    <Setter Property="Foreground" Value="Gray"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                <Button Content="Fjern Film" HorizontalAlignment="Left" Margin="340,347,0,0" VerticalAlignment="Top"
                    Command="{Binding RemoveMovieCommand}"
                    ToolTip="Vælg en film og klik for at slette den" RenderTransformOrigin="0.495,0.463" Grid.Column="5">
                    <Button.Style>
                        <Style TargetType="{x:Type Button}">
                            <Style.Triggers>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Background" Value="LightGray"/>
                                    <Setter Property="Foreground" Value="Gray"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </Grid>
        </TabItem>
        <TabItem Header="Forestilling" x:Name="ShowsTab">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="155*"/>
                    <ColumnDefinition Width="321*"/>
                    <ColumnDefinition Width="318*"/>
                </Grid.ColumnDefinitions>

                <!-- Venstre formular -->
                <Grid Grid.Column="0" Margin="20,20,20,20" Grid.ColumnSpan="2">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="160"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Film -->
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Film" VerticalAlignment="Center"/>
                    <ComboBox Grid.Row="0" Grid.Column="1" Width="250"
                              ItemsSource="{Binding MovieList}"
                              SelectedItem="{Binding SelectedMovieForShow}">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Title}"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>

                    <!-- Dato -->
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Dato" VerticalAlignment="Center"/>
                    <DatePicker Grid.Row="1" Grid.Column="1" Width="250"
                                SelectedDate="{Binding SelectedDate, UpdateSourceTrigger=PropertyChanged}"/>

                    <!-- Tidspunkt -->
                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Tidspunkt" VerticalAlignment="Center"/>
                    <ComboBox Grid.Row="2" Grid.Column="1" Width="250"
                              ItemsSource="{Binding AvailableTimes}"
                              SelectedItem="{Binding SelectedTime}">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding StringFormat={}{0:hh\\:mm}}"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>

                    <!-- Varighed (minutter) -->
                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Varighed (minutter)" VerticalAlignment="Center"/>
                    <TextBox Grid.Row="3" Grid.Column="1" Width="250" IsReadOnly="True"
                             Text="{Binding DurationMinutesText}"/>

                    <!-- Biograf -->
                    <TextBlock Grid.Row="4" Grid.Column="0" Text="Biograf" VerticalAlignment="Center"/>
                    <ComboBox Grid.Row="4" Grid.Column="1" Width="250"
                              ItemsSource="{Binding Cinemas}"
                              SelectedItem="{Binding SelectedCinema}"
                              DisplayMemberPath="Name"/>

                    <!-- Sal -->
                    <TextBlock Grid.Row="5" Grid.Column="0" Text="Sal" VerticalAlignment="Center"/>
                    <ComboBox Grid.Row="5" Grid.Column="1" Width="250"
          ItemsSource="{Binding AvailableHalls}"
          SelectedItem="{Binding SelectedHall}"
          DisplayMemberPath="Name"/>

                    <!-- Opret og Fjern knapper -->
                    <StackPanel Grid.Row="6" Grid.Column="1" Orientation="Horizontal" Margin="13,16,13,0">
                        <Button Width="117" Content="Opret forestilling" Command="{Binding CreateShowCommand}"/>
                        <Button Width="121" Margin="12,0,0,0" Content="Fjern forestilling"
                                Command="{Binding RemoveShowCommand}"/>
                    </StackPanel>
                </Grid>

                <!-- Højre liste (filtreret efter valgt biograf) -->
                <GroupBox Grid.Column="2" Margin="20,20,20,20" Header="Forestillinger">
                    <ListBox ItemsSource="{Binding ShowsView}" SelectedItem="{Binding SelectedShow}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel>
                                    <TextBlock Text="{Binding Movie.Title}" FontWeight="Bold"/>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="Start: "/>
                                        <TextBlock Text="{Binding ShowTime, StringFormat={}{0:dd-MM-yyyy HH:mm}}"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="Slut: "/>
                                        <TextBlock Text="{Binding EndTime, StringFormat={}{0:dd-MM-yyyy HH:mm}}"/>
                                    </StackPanel>
                                    <TextBlock Text="{Binding Hall.Name}"/>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </GroupBox>
            </Grid>
        </TabItem>

        <TabItem Header="Booking" x:Name="BookingTab">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="155*"/>
                    <ColumnDefinition Width="321*"/>
                    <ColumnDefinition Width="318*"/>
                </Grid.ColumnDefinitions>

                <!-- Venstre formular -->
                <Grid Grid.Column="0" Margin="20" Grid.ColumnSpan="2">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="160"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Biograf -->
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Biograf" VerticalAlignment="Center" Margin="0,5"/>
                    <ComboBox Grid.Row="0" Grid.Column="1" Width="250" Margin="0,5"
              ItemsSource="{Binding Cinemas}"
              SelectedItem="{Binding SelectedCinema}"
              DisplayMemberPath="Name"/>

                    <!-- Film -->
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Film" VerticalAlignment="Center" Margin="0,5"/>
                    <ComboBox Grid.Row="1" Grid.Column="1" Width="250" Margin="0,5"
              ItemsSource="{Binding MovieList}"
              SelectedItem="{Binding SelectedMovieForShow}">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Title}"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>

                    <!-- Dato -->
                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Dato" VerticalAlignment="Center" Margin="0,5"/>
                    <DatePicker Grid.Row="2" Grid.Column="1" Width="250" Margin="0,5"
                SelectedDate="{Binding SelectedDate, UpdateSourceTrigger=PropertyChanged}"/>

                    <!-- Visninger -->
                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Visninger" VerticalAlignment="Center" Margin="0,5"/>
                    <ComboBox Grid.Row="3" Grid.Column="1" Width="250" Margin="0,5"
              ItemsSource="{Binding AvailableShows}"
              SelectedItem="{Binding SelectedShow}">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding ShowTime, StringFormat={}{0:HH\\:mm dd-MM-yyyy}}"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>

                    <!-- Email -->
                    <TextBlock Grid.Row="4" Grid.Column="0" Text="Email" VerticalAlignment="Center" Margin="0,5"/>
                    <TextBox Grid.Row="4" Grid.Column="1" Width="250" Margin="0,5"
             Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"/>

                    <!-- Telefonnummer -->
                    <TextBlock Grid.Row="5" Grid.Column="0" Text="Telefonnummer" VerticalAlignment="Center" Margin="0,5"/>
                    <TextBox Grid.Row="5" Grid.Column="1" Width="250" Margin="0,5"
             Text="{Binding PhoneNumber, UpdateSourceTrigger=PropertyChanged}"/>

                    <!-- Antal billetter -->
                    <TextBlock Grid.Row="6" Grid.Column="0" Text="Antal billetter" VerticalAlignment="Center" Margin="0,5"/>
                    <TextBox Grid.Row="6" Grid.Column="1" Width="250" Margin="0,5"
             Text="{Binding QtyTickets, UpdateSourceTrigger=PropertyChanged}"/>

                    <!-- Knapper -->
                    <StackPanel Grid.Row="7" Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,15,0,0">
                        <Button Content="Opret Booking" Command="{Binding CreateBookingCommand}" Width="120" Margin="0,0,10,0"/>
                        <Button Content="Fjern Booking" Command="{Binding RemoveBookingCommand}" Width="120"/>
                    </StackPanel>
                </Grid>

                <!-- Højre liste (filtreret efter valgt biograf) -->
                <GroupBox Grid.Column="2" Margin="20,20,20,20" Header="Bookinger">
                    <ListBox ItemsSource="{Binding BookingView}" SelectedItem="{Binding SelectedBooking}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel>
                                    <TextBlock Text="{Binding Movie.Title}" FontWeight="Bold"/>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="Start: "/>
                                        <TextBlock Text="{Binding ShowTime, StringFormat={}{0:dd-MM-yyyy HH:mm}}"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="Slut: "/>
                                        <TextBlock Text="{Binding EndTime, StringFormat={}{0:dd-MM-yyyy HH:mm}}"/>
                                    </StackPanel>
                                    <TextBlock Text="{Binding SelectedHall}"/>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </GroupBox>
            </Grid>
        </TabItem>
    </TabControl>
</Window>
