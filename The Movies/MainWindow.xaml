<Window x:Class="The_Movies.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:The_Movies" xmlns:viewmodel="clr-namespace:The_Movies.ViewModel" d:DataContext="{d:DesignInstance Type=viewmodel:MovieViewModel}"
        mc:Ignorable="d"

        Title="MainWindow" Height="450" Width="800">
    <Window.Resources>
    </Window.Resources>
    <TabControl x:Name="RootTabs">
        <TabItem Header="Film Liste" x:Name="MoviesTab">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="14*"/>
                    <ColumnDefinition Width="17*"/>
                    <ColumnDefinition Width="64*"/>
                    <ColumnDefinition Width="25*"/>
                    <ColumnDefinition Width="674*"/>
                </Grid.ColumnDefinitions>

                <Button Content="Opret Film" HorizontalAlignment="Left" Margin="247,347,0,0" VerticalAlignment="Top" 
                        Command="{Binding CreateMovieCommand}"
                        ToolTip="Fill in all fields to create a movie" Grid.Column="4">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Style.Triggers>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Background" Value="LightGray"/>
                                    <Setter Property="Foreground" Value="Gray"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                <!-- Logo -->
                <Image HorizontalAlignment="Left" Height="100" Margin="227,10,0,0" VerticalAlignment="Top" Width="100" Source="Skærmbillede 2025-08-14 135002.png" Grid.Column="4"/>
                <!-- Titel -->
                <TextBlock HorizontalAlignment="Left" Margin="131,125,0,0" TextWrapping="Wrap" Text="Titel" VerticalAlignment="Top" Grid.Column="4"/>
                <TextBox HorizontalAlignment="Left" Margin="131,141,0,0" TextWrapping="Wrap" Text="{Binding Title, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120" Grid.Column="4"/>
                <!-- Varighed -->
                <TextBlock HorizontalAlignment="Left" Margin="131,160,0,0" TextWrapping="Wrap" Text="Varighed (i minutter)" VerticalAlignment="Top" Grid.Column="4"/>
                <TextBox HorizontalAlignment="Left" Margin="131,181,0,0" TextWrapping="Wrap" Text="{Binding Duration, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120" Grid.Column="4"/>
                <!-- Filmgenre -->
                <TextBlock HorizontalAlignment="Left" Margin="131,204,0,0" TextWrapping="Wrap" Text="Filmgenre" VerticalAlignment="Top" Grid.Column="4"/>
                <TextBox HorizontalAlignment="Left" Margin="131,220,0,0" TextWrapping="Wrap" Text="{Binding Genre, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120" Grid.Column="4"/>
                <!-- Instruktør -->
                <TextBlock HorizontalAlignment="Left" Margin="131,246,0,0" TextWrapping="Wrap" Text="Instruktør" VerticalAlignment="Top" Grid.Column="4"/>
                <TextBox HorizontalAlignment="Left" Margin="131,262,0,0" TextWrapping="Wrap" Text="{Binding Director, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120" Grid.Column="4"/>
                <ListBox ItemsSource="{Binding MovieList}" SelectedItem="{Binding SelectedMovie,Mode=TwoWay}"
                         Margin="310,125,40,125" Grid.Column="4">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Title}" FontWeight="Bold" Margin="0,0,10,0" />
                                <TextBlock Text="{Binding Duration}" Margin="0,0,10,0" />
                                <TextBlock Text="{Binding Genre}" Margin="0,0,10,0" />
                                <TextBlock Text="{Binding Director}" Margin="0,0,10,0" />
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                <Button Content="Opret Film" HorizontalAlignment="Left" Margin="247,347,0,0" VerticalAlignment="Top" 
                    Command="{Binding CreateMovieCommand}"
                    ToolTip="Fill in all fields to create a movie" Grid.Column="4">
                    <Button.Style>
                        <Style TargetType="{x:Type Button}">
                            <Style.Triggers>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Background" Value="LightGray"/>
                                    <Setter Property="Foreground" Value="Gray"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                <Button Content="Fjern Film" HorizontalAlignment="Left" Margin="340,347,0,0" VerticalAlignment="Top"
                    Command="{Binding RemoveMovieCommand}"
                    ToolTip="Vælg en film og klik for at slette den" RenderTransformOrigin="0.495,0.463" Grid.Column="4">
                    <Button.Style>
                        <Style TargetType="{x:Type Button}">
                            <Style.Triggers>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Background" Value="LightGray"/>
                                    <Setter Property="Foreground" Value="Gray"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </Grid>
        </TabItem>
        <TabItem Header="Forestilling" x:Name="ShowsTab">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="3*"/>
                    <ColumnDefinition Width="2*"/>
                </Grid.ColumnDefinitions>

                <!-- Venstre formular -->
                <Grid Grid.Column="0" Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="160"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Film -->
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Film" VerticalAlignment="Center"/>
                    <ComboBox Grid.Row="0" Grid.Column="1" Width="250"
                              ItemsSource="{Binding MovieList}"
                              SelectedItem="{Binding SelectedMovieForShow}">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Title}"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>

                    <!-- Dato -->
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Dato" VerticalAlignment="Center"/>
                    <DatePicker Grid.Row="1" Grid.Column="1" Width="250"
                                SelectedDate="{Binding SelectedDate, UpdateSourceTrigger=PropertyChanged}"/>

                    <!-- Tidspunkt -->
                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Tidspunkt" VerticalAlignment="Center"/>
                    <ComboBox Grid.Row="2" Grid.Column="1" Width="250"
                              ItemsSource="{Binding AvailableTimes}"
                              SelectedItem="{Binding SelectedTime}">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding StringFormat={}{0:hh\\:mm}}"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>

                    <!-- Varighed (minutter) -->
                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Varighed (minutter)" VerticalAlignment="Center"/>
                    <TextBox Grid.Row="3" Grid.Column="1" Width="250" IsReadOnly="True"
                             Text="{Binding DurationMinutesText}"/>

                    <!-- Biograf -->
                    <TextBlock Grid.Row="4" Grid.Column="0" Text="Biograf" VerticalAlignment="Center"/>
                    <ComboBox Grid.Row="4" Grid.Column="1" Width="250"
                              ItemsSource="{Binding Cinemas}"
                              SelectedItem="{Binding SelectedCinema}"
                              DisplayMemberPath="Name"/>

                    <!-- Sal -->
                    <TextBlock Grid.Row="5" Grid.Column="0" Text="Sal" VerticalAlignment="Center"/>
                    <ComboBox Grid.Row="5" Grid.Column="1" Width="250"
          ItemsSource="{Binding AvailableHalls}"
          SelectedItem="{Binding SelectedNewHall}"
          DisplayMemberPath="Name"/>

                    <!-- Opret og Fjern knapper -->
                    <StackPanel Grid.Row="6" Grid.Column="1" Orientation="Horizontal" Margin="13,16,13,0">
                        <Button Width="117" Content="Opret forestilling" Command="{Binding CreateShowCommand}"/>
                        <Button Width="121" Margin="12,0,0,0" Content="Fjern forestilling"
                                Command="{Binding RemoveShowCommand}"/>
                    </StackPanel>
                </Grid>

                <!-- Højre liste (filtreret efter valgt biograf) -->
                <GroupBox Grid.Column="1" Margin="20" Header="Forestillinger">
                    <ListBox ItemsSource="{Binding ShowsView}" SelectedItem="{Binding SelectedShow}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel>
                                    <TextBlock Text="{Binding Movie.Title}" FontWeight="Bold"/>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="Start: "/>
                                        <TextBlock Text="{Binding ShowTime, StringFormat={}{0:dd-MM-yyyy HH:mm}}"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="Slut: "/>
                                        <TextBlock Text="{Binding EndTime, StringFormat={}{0:dd-MM-yyyy HH:mm}}"/>
                                    </StackPanel>
                                    <TextBlock Text="{Binding HallDisplay}"/>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </GroupBox>
            </Grid>
        </TabItem>
        <TabItem Header="Booking" x:Name="Bookings">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="14*"/>
                    <ColumnDefinition Width="17*"/>
                    <ColumnDefinition Width="64*"/>
                    <ColumnDefinition Width="25*"/>
                    <ColumnDefinition Width="110*"/>
                    <ColumnDefinition Width="565*"/>
                </Grid.ColumnDefinitions>

                <Button Content="Opret Booking" HorizontalAlignment="Left" Margin="40,347,0,0" VerticalAlignment="Top" 
        Command="{Binding Book}"
        ToolTip="Fill in all fields to create a booking" Grid.Column="5">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Style.Triggers>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Background" Value="LightGray"/>
                                    <Setter Property="Foreground" Value="Gray"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                <!-- Logo -->
                <Image HorizontalAlignment="Left" Height="100" Margin="118,10,0,0" VerticalAlignment="Top" Width="100" Source="Skærmbillede 2025-08-14 135002.png" Grid.Column="5"/>
                <!-- Biograf -->
                <TextBlock HorizontalAlignment="Left" Margin="22,125,0,0" TextWrapping="Wrap" Text="Biograf" VerticalAlignment="Top" Grid.Column="5"/>
                <TextBox HorizontalAlignment="Left" Margin="22,141,0,0" TextWrapping="Wrap" Text="{Binding Cinema, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120" Grid.Column="5"/>
                <!-- Forestilling -->
                <TextBlock HorizontalAlignment="Left" Margin="22,160,0,0" TextWrapping="Wrap" Text="Forestilling" VerticalAlignment="Top" Grid.Column="5"/>
                <TextBox HorizontalAlignment="Left" Margin="22,181,0,0" TextWrapping="Wrap" Text="{Binding Show, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120" Grid.Column="5"/>
                <!-- Telefonnummer -->
                <TextBlock HorizontalAlignment="Left" Margin="22,204,0,0" TextWrapping="Wrap" Text="Telefonnummer" VerticalAlignment="Top" Grid.Column="5"/>
                <TextBox HorizontalAlignment="Left" Margin="22,220,0,0" TextWrapping="Wrap" Text="{Binding Telefonnumber, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120" Grid.Column="5"/>
                <!-- Email -->
                <TextBlock HorizontalAlignment="Left" Margin="22,246,0,0" TextWrapping="Wrap" Text="Email" VerticalAlignment="Top" Grid.Column="5"/>
                <TextBox HorizontalAlignment="Left" Margin="22,262,0,0" TextWrapping="Wrap" Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120" Grid.Column="5"/>
                <!-- Antal Billetter -->
                <TextBlock HorizontalAlignment="Left" Margin="22,286,0,0" TextWrapping="Wrap" Text="Antal Billetter" VerticalAlignment="Top" Grid.Column="5"/>
                <TextBox HorizontalAlignment="Left" Margin="22,307,0,0" TextWrapping="Wrap" Text="{Binding Antal_Billetter, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120" Grid.Column="5"/>
                <!-- Indtast Telefonnummer -->
                <TextBlock HorizontalAlignment="Left" Margin="320,80,0,0" TextWrapping="Wrap" Text="Telefonnummer" VerticalAlignment="Top" Grid.Column="5"/>
                <TextBox HorizontalAlignment="Left" Margin="320,96,0,0" TextWrapping="Wrap" Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120" Grid.Column="5"/>
                <ListBox ItemsSource="{Binding MovieList}" SelectedItem="{Binding SelectedMovie,Mode=TwoWay}"
         Margin="200,125,40,125" Grid.Column="5">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Title}" FontWeight="Bold" Margin="0,0,10,0" />
                                <TextBlock Text="{Binding Duration}" Margin="0,0,10,0" />
                                <TextBlock Text="{Binding Genre}" Margin="0,0,10,0" />
                                <TextBlock Text="{Binding Director}" Margin="0,0,10,0" />
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                <Button Content="Slet Booking" HorizontalAlignment="Left" Margin="138,347,0,0" VerticalAlignment="Top" 
    Command="{Binding DeleteBooking}"
    ToolTip="Fill in all fields to delete a booking" Grid.Column="5">
                    <Button.Style>
                        <Style TargetType="{x:Type Button}">
                            <Style.Triggers>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Background" Value="LightGray"/>
                                    <Setter Property="Foreground" Value="Gray"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

                <Button Content="Find Booking" HorizontalAlignment="Left" Margin="450,86,0,0" VerticalAlignment="Top" 
Command="{Binding FindBooking}"
ToolTip="Insert telefonnumber to find a booking" Grid.Column="5">
                    <Button.Style>
                        <Style TargetType="{x:Type Button}">
                            <Style.Triggers>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Background" Value="LightGray"/>
                                    <Setter Property="Foreground" Value="Gray"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </Grid>
        </TabItem>
    </TabControl>
</Window>
